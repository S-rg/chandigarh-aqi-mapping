<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sensor Data Dashboard</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="{{ url_for('static', filename='plot.css') }}" rel="stylesheet">
</head>
<body>
    <div class="dashboard-header">
        <div class="container-fluid">
            <div class="row align-items-center">
                <div class="col-md-8">
                    <div class="header-left">
                        <div class="dashboard-icon">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <rect x="4" y="8" width="3" height="8" fill="#4A90E2"/>
                                <rect x="9" y="6" width="3" height="10" fill="#4A90E2"/>
                                <rect x="14" y="4" width="3" height="12" fill="#4A90E2"/>
                            </svg>
                        </div>
                        <div class="header-text">
                            <h1 class="dashboard-title">Sensor Data Dashboard</h1>
                            <p class="dashboard-subtitle">Real-time environmental monitoring system</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-4 text-end">
                    <div class="header-controls">
                        <div class="last-update">
                            <span class="label">Last Update</span>
                            <span class="value" id="globalLastUpdate">Never</span>
                        </div>
                        <div class="interval-control">
                            <div class="interval-selector" id="updateInterval">
                                <svg class="gear-icon" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M12 15.5A3.5 3.5 0 0 1 8.5 12A3.5 3.5 0 0 1 12 8.5a3.5 3.5 0 0 1 3.5 3.5a3.5 3.5 0 0 1-3.5 3.5M19.43 12.97c.04-.32.07-.64.07-.97c0-.33-.03-.66-.07-1l2.11-1.63c.19-.15.24-.42.12-.64l-2-3.46c-.12-.22-.39-.31-.61-.22l-2.49 1c-.52-.39-1.06-.73-1.69-.98l-.37-2.65A.506.506 0 0 0 14 2h-4c-.25 0-.46.18-.5.42l-.37 2.65c-.63.25-1.17.59-1.69.98l-2.49-1c-.22-.09-.49 0-.61.22l-2 3.46c-.13.22-.07.49.12.64L4.57 11c-.04.34-.07.67-.07 1c0 .33.03.65.07.97l-2.11 1.66c-.19.15-.25.42-.12.64l2 3.46c.12.22.39.3.61.22l2.49-1.01c.52.4 1.06.74 1.69.99l.37 2.65c.04.24.25.42.5.42h4c.25 0 .46-.18.5-.42l.37-2.65c.63-.26 1.17-.59 1.69-.99l2.49 1.01c.22.08.49 0 .61-.22l2-3.46c.12-.22.07-.49-.12-.64l-2.11-1.66Z" fill="#666"/>
                                </svg>
                                <select id="updateIntervalSelect" class="interval-dropdown">
                                    <option value="1000">1 second</option>
                                    <option value="5000" selected>5 seconds</option>
                                    <option value="10000">10 seconds</option>
                                    <option value="30000">30 seconds</option>
                                    <option value="60000">1 minute</option>
                                </select>
                                <svg class="chevron-down" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="m6 9 6 6 6-6" stroke="#666" stroke-width="2" fill="none"/>
                                </svg>
                            </div>
                        </div>
                        <div class="control-buttons">
                            <button class="btn btn-pause" onclick="toggleAutoUpdate()">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <rect x="6" y="4" width="4" height="16" fill="currentColor"/>
                                    <rect x="14" y="4" width="4" height="16" fill="currentColor"/>
                                </svg>
                                <span id="autoUpdateBtn">Pause</span>
                            </button>
                            <button class="btn btn-refresh" onclick="refreshAllSensors()">
                                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M1 4v6h6" stroke="currentColor" stroke-width="2" fill="none"/>
                                    <path d="M23 20v-6h-6" stroke="currentColor" stroke-width="2" fill="none"/>
                                    <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15" stroke="currentColor" stroke-width="2" fill="none"/>
                                </svg>
                                <span>Refresh All</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div class="container-fluid">
        <div id="errorAlert" class="alert alert-custom alert-dismissible fade show" style="display: none;">
            <strong>Error!</strong> <span id="errorMessage"></span>
            <button type="button" class="btn-close" onclick="hideError()"></button>
        </div>
        
        <div class="loading-spinner" id="loadingSpinner" style="display: none;">
            <span class="spinner-border spinner-border-sm me-2"></span>
            Loading...
        </div>
        
        <div class="row" id="sensorGrid">
            {% for i in range(1, 21) %}
            <div class="col-xl-4 col-lg-6 col-md-6">
                <div class="sensor-card" id="sensor-card-{{ i }}">
                    <div class="sensor-header">
                        <div class="sensor-icon">
                            <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M3 17v2a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-2" stroke="currentColor" stroke-width="2" fill="none"/>
                                <path d="M7 17V7a5 5 0 0 1 10 0v10" stroke="currentColor" stroke-width="2" fill="none"/>
                            </svg>
                        </div>
                        <div class="sensor-info-header">
                            <span class="sensor-name">Sensor {{ i }}</span>
                            <span class="status-text">
                                <span class="status-dot status-inactive" id="status-{{ i }}"></span>
                                <span class="status-label" id="status-label-{{ i }}">Disconnected</span>
                            </span>
                        </div>
                        <div class="sensor-value-container" id="value-container-{{ i }}" style="display: none;">
                            <span class="sensor-value" id="value-{{ i }}">--</span>
                            <span class="sensor-unit" id="unit-{{ i }}"></span>
                        </div>
                    </div>
                    <div class="sensor-details" id="details-{{ i }}" style="display: none;">
                        <div class="detail-row">
                            <span class="detail-label">PM1</span>
                            <span class="detail-value" id="pm1-{{ i }}">-- µg/m³</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">PM2.5</span>
                            <span class="detail-value" id="pm25-{{ i }}">-- µg/m³</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">PM10</span>
                            <span class="detail-value" id="pm10-{{ i }}">-- µg/m³</span>
                        </div>
                    </div>
                    <div class="waiting-message" id="waiting-{{ i }}">
                        <span>Waiting for data...</span>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        
    </div>
    
    <!-- JavaScript -->
    <script>

    </script>
</body>
</html>